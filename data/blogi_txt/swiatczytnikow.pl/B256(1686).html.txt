Nadchodzi nowe. W zasadzie już nadeszło i wielu z nas z niego korzysta, nawet o tym nie wiedząc. Mowa o formacie KF8 – następcy poczciwego MOBI. Format ten daje trochę nowych możliwości zarówno dla autorów, jak i czytelników, dlatego warto przyjrzeć mu się dokładniej, tym bardziej że działa on na wszystkich popularnych w Polsce czytnikach Kindle, a po cichu wprowadziło go już kilka polskich księgarni. Przygotowałem zestaw pytań i odpowiedzi na temat nowego formatu. Zobaczymy też kilka przykładów. KF8 – co to za format? Format MOBI, od roku 2007 używany w urządzeniach Kindle, ma już poważną historię. Amazon przejął go wraz z firmą Mobipocket, która kiedyś dominowała na rynku e-booków. Format jest dobrze znany (patrz opis na MobileRead), ale dość stary, bo oparty został o specyfikację HTML w wersji 3.2 – a ta pochodzi z głębokich lat 90. Poza HTML pliki MOBI obsługują bardzo podstawowe formatowanie CSS – a ono już 10 lat temu budziło politowanie. To wszystko oznacza, że możliwości kształtowania wyglądu książki w MOBI są dość ograniczone.  „Kindle Format 8″, który Amazon ogłosił pod koniec roku 2011, został oparty o nową wersję HTML5 i CSS 3 (pełna lista tagów i atrybutów na stronie Amazonu). Umożliwia to znacznie bardziej kreatywne formatowanie e-booków. KF8 zbliżony jest do wprowadzonego niedawno także EPUB3 /m.in. także opiera się na HTML5/, choć Amazon nie skorzystał ponownie z okazji do unifikacji. Przykłady, przykłady! Co KF8 daje w praktyce? Poniżej umieściłem kilka przykładów, za które dziękuję działom konwersji firm Virtualo (tło szare) i Nexto (tło białe). Nowy format umożliwia wreszcie przenoszenie wyrazów, czyli używanie tzw. łącznika opcjonalnego. Było to dla mnie dużym zaskoczeniem, bo na brak przenoszenia narzekałem  w recenzji Kindle Paperwhite. Po lewej starszy format, po prawej KF8. Przykład pochodzi z książki „Ekonomia miłości. Szczęście w związku a zmywanie naczyń”. Ze strony można pobrać darmowy fragment – i co ważniejsze – przenoszenie zobaczymy zarówno na Paperwhite, jak i na Keyboard! Nareszcie justowanie tekstu w e-bookach ma sens. Choć rzeczywiście nadal wadą Kindle jest to, że nie przenosi wyrazów samodzielnie, tylko wymaga odpowiednio przygotowanego e-booka. Bardzo poprawiła się typografia – w jednym e-booku można jednocześnie używać kilku krojów czcionki, co było ograniczone w formacie MOBI.  Można też np. ładniej wyróżniać cytaty.  KF8 to także znacznie czytelniejsze tabelki. MOBI vs KF8.   Czasami mogą to być też rzeczy drobne – takie jak ozdobne rozpoczęcie rozdziałów w książce Pratchetta – MOBI vs KF8:   Z rzeczy prostszych i przydatnych – KF8 umożliwia oblanie obrazka tekstem – coś, co miał EPUB od dawna…  A w taki oto piękny sposób kończy się niezidentyfikowana książka z Nexto: Jakie urządzenia czytają format KF8? Początkowo nowy format obsługiwany był wyłącznie przez tablety Kindle Fire, co mogło sugerować, że będzie to wyłącznie format dla książek „multimedialnych”. Jednak w wyniku aktualizacji oprogramowania – obsługa KF8 trafiła na większość czytników Kindle. Obecnie (marzec 2013) są to wszystkie modele Kindle dostępne teraz i niedawno w sprzedaży:  Classic – od oprogramowania 4.1 Keyboard – od oprogramowania 3.4 Touch – od oprogramowania 5.1 Paperwhite – od początku.  Classic i Keyboard nie obsługują jednak KF8 w 100%. Jak przeczytamy na blogu firmy Nexto: Format ten obsługują wszystkie czytniki Kindle, jednak tylko Touch i Paperwhite wykorzystują znaczący zakres dostępnych opcji. Na starszych urządzeniach czytelnika może co najwyżej przyjemnie zaskoczyć możliwość wyboru oryginalnych fontów projektu ebooka (ale i to nie zawsze). Nie do końca – bo np. ładniejsze tabelki czy oblewanie obrazków przez tekst działają także na Classic/Keyboard. Ponadto KF8 obsługują aplikacje Kindle dla PC oraz iOS/Android. Co ze starszymi wersjami Kindle i innymi czytnikami? Kindle DX albo Kindle 2 nie obsługują nowego formatu. KF8 nie działa także na innych czytnikach normalnie obsługujących MOBI (np. Onyx Boox z aplikacją FB Reader). To jednak jego twórcy przewidzieli – domyślnie nowy MOBI jest tzw. kontenerem - gdzie w środku znajdują się tak naprawdę dwa e-booki: w nowym i starym formacie. Jak podaje Virtualo w informacji prasowej: Virtualo wzbogaciło swój format MOBI o nową opcję dwa w jednym – jeden plik zawiera dwie wersje e-booka – pierwszą w poprzednim standardzie MOBI oraz drugą w nowym standardzie obsługiwanym przez najnowsze Kindle – AZW3. Klient nie musi wybierać między formatami i wiedzieć, który jest właściwy na jego urządzenie – czytnik sam rozpozna właściwy format pliku i go odczyta. Próba otwarcia pliku MOBI na Onyksie powinna więc się udać, jeśli nie, to pozostaje jeszcze konwersja w Calibre. Jakie rozszerzenie mają e-booki KF8? Wbrew pozorom nie jest to „.kf8”. Najczęściej spotykamy rozszerzenie „.azw3” – ale może być to także… standardowe rozszerzenie .mobi. To prowadzi do kolejnego pytania… Jak rozpoznać, czy książka jest w KF8? Nowy format nie zawsze rozpoznamy na pierwszy rzut oka. Jeśli książka jest sformatowana w prosty sposób, nie używa osadzonych czcionek – to będzie wyglądała mniej więcej tak samo jak tradycyjne MOBI. Na co jednak można zwrócić uwagę: Rozszerzenie pliku, np. azw3 (ale to nie dotyczy plików z polskich księgarni, bo te mają nadal .mobi). Duże rozmiary pliku – o tym dalej Interlinia – inna niż w książkach MOBI (na Touch/PW – większa, na Keyboard/Classic – mniejsza) Nietypowe formatowanie Obecność w ustawieniach tekstu opcji „Publisher font”  Starsze wersje Kindle for PC (np. 1.4) miały błąd polegający na tym, że książki KF8 otwierały się zawsze w jednej kolumnie, nawet jeśli w ustawieniach wybraliśmy dwie. Od paru miesięcy jest to już poprawione. Jak wygenerować plik w formacie KF8? Jeśli chcemy przekonwertować naszego e-booka (w formacie HTML albo EPUB) do KF8, są do tego 3 darmowe narzędzia: KindleGen – oficjalny sposób to użycie po prostu amazonowego narzędzia do konwersji. KindleGen to narzędzie konsolowe dostępne dla Windows, Maca i Linuksa. Jako formaty źródłowe przyjmuje m.in. HTML oraz EPUB. Zwykli ludzie skorzystają z większym pożytkiem z programu Kindle Previewer – można w nim otworzyć plik EPUB – i zostanie on w locie przekonwertowany do KF8. Calibre – popularny pakiet dla zaawansowanych czytelników umożliwia także generowanie plików KF8 – wybieramy tutaj jako format docelowy AZW3.  O czym jednak warto pamiętać – KF8 jest formatem zamkniętym, więc Calibre może go nie generować w 100% zgodnie ze specyfikacją Amazonu. Sprawia to, że chociaż na czytniku działać będzie pobranie – to czasami zostanie odrzucony przy wysyłce mailowej – Amazon nam odpisze, że plik był uszkodzony. W takim przypadku najlepiej go wrzucić po kablu. Niemniej, nawet w Kindle Store widywałem e-booki skonwertowane przy pomocy Calibre, np. Gamestorming wydany przez O’Reilly. Jak najlepiej wykorzystać nowy format? Wszędzie tam gdzie MOBI nas ograniczało, zatem:  Tabele Wykorzystywanie ilustracji Osadzanie własnych czcionek Zaawansowane formatowanie tekstu Wzory w książkach technicznych.  Warto zapoznać się z dokumentem Kindle Publishing Guidelines (uwaga: PDF!), który na 79 stronach wyjaśnia jak przygotować książkę dla urządzeń Kindle. Poradnik jest dość specjalistyczny i konieczna będzie znajomość HTML. Inne zastosowanie dla KF8 to komiksy – do przeglądania komiksów Touch/Paperwhite mają tzw. Kindle Panel View – czyli możliwość łatwego przeskoczenia między ćwiartkami strony. Wystarczy „tapnąć” dwukrotnie ekran. Przykład takiego komiksu możecie pobrać z artykułu Pawła Jastrzębskiego o przygotowywaniu mangi na Kindle. Które księgarnie sprzedają książki w nowym formacie? Polskie księgarnie powoli przechodzą na KF8, choć czasami trudno znaleźć informację na ten temat. O premierze nowego formatu Amazonu informowali w lutym 2013 dwaj dystrybutorzy:  Virtualo: E-booki na nowe wersje modeli czytników Kindle Nexto: Nowa wersja formatu MOBI  Virtualo sukcesywnie podmienia nowości, natomiast Nexto w nowym formacje ma często okazje dnia – o czym każdorazowo informuje w opisie książki. Ale inne księgarnie też miewają KF8. Przykładowo książki Lewisa kupione w Woblinku mają osadzone czcionki i ładne inicjały na początku rozdziałów – co nie byłoby możliwe w klasycznym MOBI. Poniżej screen z Kindle Keyboard.  Szkoda, że nowy format nie jest oznaczony bardziej konsekwentnie – warto by na przykład wiedzieć, czy książki które kiedyś kupiliśmy zostały skonwertowane na nowo… Spośród księgarni anglojęzycznych w całości na KF8 przerzucił się np. O’Reilly i jego książki programistyczne wyglądają bardzo ładnie. W Kindle Store w tym formacie znajdziemy większość nowych książek, wśród starych nowy format ma może połowa. Amazon nie informuje jednak o tym że do pobrania jest nowa wersja. Robią tak tylko jeśli stara wersja miała poważne błędy i wtedy dostajemy maila z prośbą o pobranie aktualizacji, przykładowo: Ale jeśli usuniemy książkę z urządzenia (co nie kasuje zakładek i podkreśleń, powiązanych z książką) i pobierzemy ją ponownie przez Cloud/Archived Items, to zostanie pobrana nowa wersja. Tak właśnie się stało z biografią Steve’a Jobsa. Dlaczego pliki z polskich księgarni są takie duże? Format KF8 to jedna z odpowiedzi – gdy polskie księgarnie dają do pobrania pliki w tym formacie, zawierają one często jednocześnie starą i nową wersję e-booka. Dlatego nieraz mają po kilkanaście, kilkadziesiąt MB. Może to też być błąd osób konwertujących pliki: otóż Kindlegen umożliwia różne rodzaje kompresji Mobi i ma takie parametry. -c0: no compression -c1: standard DOC compression -c2: Kindle huffdic compression Jeśli ktoś wybrał brak kompresji (c0), to nic dziwnego że plik jest duży… Zwykle konwersja „mobi do mobi” lub „mobi do azw3″ w Calibre zmniejsza skutecznie wielkość pliku. Jakie problemy wiążą się z odczytywaniem nowego formatu? Kindle Keyboard i Classic ze zaktualizowanym oprogramowaniem obsługują KF8, jednak nie bez problemów. Z tego co zauważyłem: W wielu e-bookach jest zbyt mała interlinia – mniejsza niż np. na Touch/Paperwhite. Szczególnie jeśli używamy sztuczki zwiększenia interlinii, będzie ona mała. Sposobem na to może być powiększenie czcionki. „Publisher font” w niektórych e-bookach może być wyświetlany bez polskich liter. Można powiedzieć, że do Kindle dotarły wieczne problemy formatu EPUB z osadzeniem polskich czcionek, na które narzekają posiadacze czytników Sony, Iriver, albo Onyx. Sposób na to jest prosty: wyłączyć „Publisher font” i wybrać któryś ze standardowych krojów czcionki Kindle, które zadziałają bez problemu.  Rozwiązaniem problematycznych e-booków może być ich konwersja do „starego” MOBI – choć w tym przypadku możemy czasami stracić formatowanie. Podsumowanie Jest z czego się cieszyć, bo nowy format oznacza ładniejsze książki. Pod względem typograficznym nadal czytnikom będzie daleko do książek drukowanych – ale to spory krok  naprzód. Mam nadzieję, że konwersja do KF8 się upowszechni w polskich księgarniach, a te będą informowały o tym formacie nieco odważniej niż teraz. :-) Czytaj dalej:  Jak podzielić wyrazy w e-bookach KF8 lub EPUB? Rzeczpospolita ma wersję na Kindle! Dwutygodnik FORUM również w MOBI/EPUB! Katalog firm zajmujących się konwersją e-booków + kilka porad OpenDyslexic – font ułatwiający czytanie przy dysleksji Wszystkie książki o HTML o 50% taniej. Promocja eBookpoint i Świata Czytników 