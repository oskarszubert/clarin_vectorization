W poniższym artykule gościnnym Krzysztof Palka wyjaśnia, jak skonwertować słownik języka polskiego PWN do formatu używanego przez Kindle. Na górze widzimy żywy przykład z Kindle Paperwhite.  Obecnie nie ma żadnego oficjalnego słownika języka polskiego na czytnik Kindle, ale przy odrobinie wysiłku możemy sobie taki zrobić. Jako bazy definicji użyjemy słowników na CD dodawanych do wersji drukowanych wydawanych przez PWN. Aby ułatwić sobie konwersję, zakładając, że kupiliśmy już słownik, możemy pobrać bazę słownikową np. wątku na forum Android. Na zachętę przed przystąpieniem do konwersji warto pokazać jak może wyglądać efekt końcowy:   Tu słownik połączony jest z encyklopedią, opiszę jak to zrobić, ale po kolei. Będziemy potrzebować pliku z definicjami w formacie (nazwijmy go „tab”): hasło 1[tabulator]definicja 1 hasło 2[tabulator]definicja 2 oraz pliku z bazą odmian oraz narzędzi do konwersji. Zaczynamy. :) Pobieramy interpreter skryptów w języku Python: http://www.python.org/ftp/python/2.7.3/python-2.7.3.msi, gdyż skrypt do konwersji jest w nim napisany. Włączamy wyświetlanie rozszerzeń znanych typów plików (w różnych Windowsach różnie to wygląda, jak nie wiesz jak to zrobić, to wyszukaj w Google) Potrzebne nam są pliki z bazą słownikową.   Jeśli mamy słowniki na płycie CD, to o konwersja do formatu tab jest opisana tutaj [http://my.opera.com/mziab/blog/2010/02/11/pwn2dict-2-0], najnowsza wersja skryptu tutaj [http://gitorious.org/pwn2dict/pw n2dict/blobs/master/pwn2dict.py], ale obsługa wymaga używania linii poleceń, a my chcemy iść na łatwiznę, więc zerkamy niżej na drugi sposób… Jeśli mamy słowniki na płycie CD, ale chcemy pobrać je z internetu i przekonwertować w inny sposób odwiedzamy wątek na forum i pobieramy słowniki które mamy w formacie Stardicta, ja np. pobieram pliki „Słownik Języka Polskiego” oraz „Encyklopedia PWN ’99” (z podanych mirrorów – pod linkami do Dropboxa) i rozpakowuje np. WinRARem.    Teraz krok dotyczących słowników w formacie Stardicta. Jedna baza zazwyczaj składa się z plików dict, idx oraz ifo – odpowiednio definicji, indeksu z definicjami oraz opisu słownika. Niestety pobrane bazy nie mają pliku ifo, więc musimy go stworzyć. Dodam, że wszystkie półprodukty staramy się przechowywać w jednym folderze. Instalujemy program Stardict: http://stardict-3.googlecode.com/files/stardict-3.0.3.exe. W edytorze Notepad++ wybieramy ustawienia → preferencje → Nowy dokument i jako format wybieramy Unix. Zamykamy okienko ustawień, tworzymy nowy dokument, wklejamy przykładowe dane:StarDict’s dict ifo file version=3.0.0 idxoffsetbits=32 wordcount=100000 idxfilesize=100000 bookname=SJP sametypesequence=m Na końcu pliku musi znajdować się jedna pusta linijka.Jeśli mamy plik „Slownik Jezyka Polskiego.idx” to zapisujemy z nazwą „Slownik Jezyka Polskiego.ifo”. We „wszystkich progamach” Szukamy folderu StarDict, a w nim linku do programu StarDict-editor, otwieram go i w zakładce „DeCompile/Verify” Otwieramy stworzony plik ifo, klikamy Decompile i folderze ze słownikami pojawia się nowy plik, tu „Slownik Jezyka Polskiego.txt”. Analogicznie robimy z pozostałymi bazami. Ja mam teraz w folderze mam 2 pliki: „Slownik Jezyka Polskiego.txt” oraz „Encyklopedia PWN 99.txt”. W Notepad++ tworzymy jeszcze jeden dokument, otwieramy otrzymane pliki txt i kopiujemy ich zawartość do stworzonego dokumentu, który następnie zapisujemy jako slo.tab Aby możliwe było wyszukiwanie wyrazów, które nie są w podstawowej formie potrzeba będzie baza odmian. Możemy ją pobrać stąd: http://www.sjp.pl/slownik/odmiany/. Następnie trzeba ją rozpakować i zmienić jej kodowanie z WINDOWS-1250 na UTF-8. W tym celu otwieramy plik „odm.txt” w Notepad++, wskazujemy, że obecne kodowanie to WINDOWS-1250 (Format → Zestaw znaków → Środkowoeuropejskie → Windows-1250). Następnie wybieramy Format → Konwertuj na format UTF-8 bez BOM) i zapisujemy plik. Zapisujemy w folderze, gdzie mamy pliki „slo.tab” oraz „odm.txt” ten skrypt: https://raw.github.com/palkakrzysiek/scripts/master/tab2opf.py Jeśli mamy zainstalowany interpreter Pythona klikamy dwukrotnie na pobrany skrypt, a jeśli do rozszerzenia „*.py” May przypisany inny program klikamy na pobrany skrypt PPM i wybieramy otwórz za pomocą → python. W zależności od tego jak duży mamy słownik pojawi nam się od kilku do kilkudziesięciu plików html (u mnie było 20) oraz plik „slo.opf” Otwieramy plik „slo.opf” za pomocą programu Notepad++ i edytujemy opis:dc:Identifier id=”uid”[identyfikator, kilka symboli opisujących słownik]/dc:Identifier  dc:Titleh2[Tytuł]/h2/dc:Title dc:Language[język]/dc:Language  DictionaryInLanguage[język haseł]/DictionaryInLanguage DictionaryOutLanguage[język definicji]/DictionaryOutLanguage U mnie element metadata wygląda tak:  metadata dc-metadata dc:Identifier id=”uid”pwn/dc:Identifier !– Title of the document – dc:Titleh2PWN: SJP oraz Encyklopedia ’99 /h2/dc:Titledc:LanguagePL/dc:Language /dc-metadata x-metadata DictionaryInLanguagepl/DictionaryInLanguageDic tionaryOutLanguagepl/DictionaryOutLanguage /x-metadata /metadata Po dokonaniu edycji zapisujemy plik. Pobieramy program KindleGen i wypakowujemy plik „kindlegen.exe” tam gdzie mamy plik „slo.opf”. Następnie przeciągamy plik „slo.opf” na „kindlegen.exe”. Rozpocznie się konwersja. W konsoli mogą pojawiać się ostrzeżenia, jednak nie przejmujemy się nimi. ;) Całość może potrwać nawet kilka minut. Uwaga: konwertery mogą potrzebować chwilami kilkaset MB RAMu, więc jeśli nie mamy go w nadmiarze, to lepiej zamknąć na chwilę nieużywane programy, sama konwersja trwa długo, a jeszcze gdyby zamiast RAMu trzeba było korzystać dysku oczekiwanie jeszcze się wydłuży. Trzeba jeszcze skopiować otrzymany plik „slo.mobi” do folderu „documents” na Kindlu. Prawdopodobnie będzie to jedyny słownik polskiego, więc zostanie automatycznie wybrany jako domyślny dla tego języka. U mnie na Paperwhite wylądował w kolekcji „Dictionaries”. Można go też otworzyć i posprawdzać jak wygląda wyszukiwanie definicji. To już wszystko. Mam nadzieję, że instrukcja się przyda, komentarze mile widziane. :)  Uwagi od Roberta:  Jeśli nie mamy słowników PWN na CD i nie chcemy korzystać z plików z sieci, format stardict jest dość popularny (korzysta z niego np. czytnik Onyx) i znajdziemy w tym formacie także inne, darmowe słowniki. W podobny sposób na podstawie plików PWN można zrobić słownik angielsko-polski. Tutaj odpowiednie mobi już krąży po różnych serwisach… Aby zobaczyć definicję słownikową w książce polskojęzycznej, musi mieć ona ustawiony w metadanych język polski. Książki z polskich księgarni, a także konwertowane przy pomocy Calibre zwykle nie wymagają już poprawek, ale w razie kłopotów odsyłam do artykułu na temat ustawień języka. Jeżeli mamy kilka słowników języka polskiego, musimy w ustawieniach wybrać domyślny – co ciekawe, niby Kindle nie obsługuje języka polskiego, ale odpowiednią etykietę „Polish” wyświetla.  Tak, wiem że byłoby najprościej podać link do takiego gotowego słownika, ale nie możemy tego zrobić i proszę tego nie robić w komentarzach. Pamiętajmy też, że modyfikacja plików słownika kupionego na CD może naruszać licencję, więc robimy to na własną odpowiedzialność.  Czytaj dalej:  Oprogramowanie 5.3.5 dla Kindle Paperwhite – poprawki słownika Paperwhite 5.3.8 – zmiana słownika w praktyce Oprogramowanie Kindle Paperwhite 5.3.8 – ważna poprawka działania słownika Oprogramowanie 5.4.3 dla nowego Paperwhite – poprawa działania PDF, kolekcji i słownika Vocabulary Builder – czyli jak powtarzać słówka z nowym Paperwhite Kindle, Calibre, formaty i jak uzyskać idealny plik 