Zaintrygowany ostatnim artykułem Roberta nt. porównania dostępnych dróg dostarczania plików na Kindle postanowiłem napisać ten artykuł, aby wyjaśnić kilka technicznych niejasności i pokazać jak skonfigurować Calibre. W efekcie będziemy mogli skorzystać ze wszystkich dobrodziejstw nowych modeli naszych ulubionych e-czytników. Trochę teorii Na początek zaznaczam, że jestem osobą, która dostarcza pliki jedynie przez kabel USB. Metoda wysyłania ich przez e-mail jest dla mnie nieoptymalna, jako że użytkownik nie posiada żadnej kontroli nad procesem konwersji, której dokonuje machineria Amazonu. Nim przejdziemy do samej konfiguracji Calibre – kilka spraw technicznych i definicji. Mamy obecnie dwa główne formaty e-książek, które są obsługiwane przez nowe modele Kindle. Ich nazwy są często mylone, więc postaram się raz na zawsze rozwiać wątpliwości w tym temacie.  MOBI7 – Stary format KF8 – Nowy format  Nie było by w tym nic skomplikowanego gdyby nie fakt, że mówię tutaj o formacie, a nie rozszerzeniu pliku. Jeżeli chodzi o rozszerzenie pliku to na dzień dzisiejszy najczęściej spotykamy się z:  MOBI AZW3 EPUB  Celowo pomijam PDFy. Osobiście uważam, że kwalifikowanie ich, jako formatu godnego e-książki to całkowita pomyłka. Odłóżmy również na chwilę EPUBy. Jak dobrze wiemy by otworzyć je na Kindle (bez modyfikacji oprogramowania) musimy je najpierw przekonwertować to MOBI bądź AZW3. I teraz zaczynają się schody. Problem, który powoduje najwięcej zamieszania. Jakie związek jest miedzy formatem, a rozszerzeniem e-książki? W wypadku pliku „.AZW3″ sprawa jest prosta. Może być on jedynie w formacie KF8. Gdy mamy w ręku plik AZW3 jesteśmy pewni, co znajduje się w środku. Jednak, gdy mamy plik „.MOBI” sprawa się komplikuje. W środku może znajdować się plik:  MOBI7 KF8 MOBI7+KF8 – Tak. Oba na raz.  Gdy mamy już tą wiedzę, mogę wyjaśnić, co chcę dzisiaj osiągnąć.  Chcę zapomnieć o plikach MOBI i formacie MOBI7. Chcę używać jedynie plików AZW3 w formacie KF8. Chcę by wszystkie książki, niezależnie czy przekonwertowane samemu, czy kupione poza ekosystemem Amazonu nie posiadały oznaczenia Personal i miały okładkę.  Konfiguracja Calibre Osiągniecie powyższych celów jest bajecznie proste. Musimy jedynie wykonać jedynie kilka zmian w konfiguracji Calibre. Zaczynamy od zmian w Opcjach wspólnych.  Jeżeli planujemy używać pluginu Hyphenate This! (Co gorąco polecam!) uruchamiamy zakładkę Wygląd i zachowanie by wymusić wyjustowanie tekstu. Opcje Wyrównanie tekstu ustawiamy na Wyjustowanie tekstu. O samym pluginie pisał wcześniej Robert. Później interesuje nas tam zakładka Ustawienia strony. Profil wejściowy ustawiamy na Kindle. Profil wyjściowy ustawiamy na nasz model. Osobiście polecam również zajrzeć do zakładki Przetwarzanie Heurystyczne i zaznaczyć tam wszystkie opcje. Zdecydowanie wydłuża to czas konwersji ale w większości przypadków podnosi jakość formatowania książki. Zastosowujemy zmiany i przechodzimy do Opcji wyjścia. Wybieramy Wyjściowy AZW3. O ile nie potrzebujemy udostępniać zawartości książki na Facebooku itp. to odznaczamy wszystkie opcje. W przeciwnym wypadku zaznaczamy jedynie opcję ostatnią.  Uwaga! Włączenie tej opcji uniemożliwia synchronizacje informacji o ostatnio przeczytanej stronie gdy używamy wielu urządzeń. Zapisujemy zmiany. Zamykamy opcje i podłączamy naszego Kindle do komputera. Gdy Calibre go wykryje pojawi nam się dodatkowa ikona w pasku.  Uruchamiamy Konfiguruj urządzenie i ustawiamy je w następujący sposób: (Przy czym Używaj podkatalogów jest opcjonalne)  Co nam to da? Spieszę z odpowiedzią. Kindle od tego momentu będzie przyjmował tylko pliki AZW3 i MOBI. Wszystko, co nie jest AZW3/MOBI zostanie konwertowane do AZW3. Dlaczego ciągle przyjmujemy MOBI mimo tego, że chcemy się z nim rozstać? Bardzo dobre pytanie. Odpowiedź jest prosta – książki niestworzone przez nas. Konwersja na siłę do formatu AZW3 może po prostu zniszczyć ich formatowanie. Więc chcemy je używać w formie stworzonej przez autora – bez żadnych modyfikacji. Np. piki MOBI z komiksami stworzone przez Kindle Comic Converter nie mogą być konwertowane do formatu AZW3. Konwerter Calibre najzwyczajniej w świecie je uszkadza. Jeżeli ktoś chce się katować fatalnym wsparciem formatu PDF to musimy go tutaj też zaznaczyć i przesunąć pod MOBI. Dodatkowo Kindle znacznie dokładniej będzie obliczał ilość stron w dokumentach. Tyle. Zadanie wykonane. Od tego momentu na 100% każda książka skonwertowana i wgrana przez Calibre nie będzie miała tagu Personal i będzie posiadała okładkę. Jeszcze raz polecam gotowy plik potraktować pluginem Hyphenate This! Naprawa plików MOBI dostarczanych przez innych Gdy Calibre wykona konwersje pliku do AZW3 to problemu nie ma, ale gdy dostaliśmy już gotowy plik MOBI np. z e-księgarni i nie chcemy go konwertować to tag Personal może się w tym przypadku pojawić. Niektóre książki Calibre będzie w stanie sam skorygować. Ale czasami mu się to nie uda. Gdy po wgraniu książki widzimy tag Personal to musimy delikatnie zmodyfikować plik MOBI przy pomocy mniej inwazyjnych metod niż pełna konwersja pliku. Potrzebujemy do tego wtyczki Quality Check. Ustawienia - Wtyczki (dolny lewy róg) - Pobierz nowe wtyczki - Znajdujemy Quality Check - Instalujemy i restartujemy Calibre.  Gdy zrobiliśmy wszystko poprawnie po restarcie aplikacji powinna pojawić nam się dodatkowa ikona w pasku – Quality Check. Wybieramy książkę/książki które chcemy poprawić i uruchamiamy opcje:  Po chwili pracy powinien pojawić nam się dymek, że wszystko zostało zmodyfikowane poprawnie. Książkę możemy już wysyłać do Kindle. Tag Personal magicznie rozpłynie nam się w powietrzu. Powyższej metody można użyć z dowolnymi plikami MOBI/AZW3. Addendum – Czysto techniczna strona problemu Kilka słów dla osób zainteresowanych, jak to właściwie działa. Każdy plik MOBI/AZW3 zawiera nagłówek z wieloma informacjami. Autorem, tytułem itp. Dzisiaj interesują nas trzy specjalne pola:  Pole nr 501 – CDE_TYPE –  Określające typ książki. Pola nr 113 oraz 504 – ASIN – Zawierający unikalny numer identyfikacyjny książki.  Gdy kupimy książkę w Kindle Store, pola te będą odpowiednio wypełnione. W momencie gdy książka wyląduje na naszym czytniku okładka zostanie oddzielnie (!) pobrana z chmury Amazonu i umieszczona w pamięci podręcznej urządzenia. Panuje ogólne przekonanie, że wpisanie w pole 501 wartości EBOK usuwa tag Personal. Jednak nie jest to prawda. Wymagany jest również numer ASIN. Rozpatrzmy teraz kilka scenariuszy. 501 ustawione na EBOK. 113 i 504 niezdefiniowane/puste.  Tag Personal. Okładka niskiej rozdzielczości. Ta, która jest zapisana we wnętrzu pliku MOBI/AZW3.  501 ustawione na EBOK. 113 i 504 zawierają prawdziwy numer ASIN.  Brak tagu Personal. Okładka wysokiej rozdzielczości pobrana od Amazonu.  501 ustawione na EBOK. 113 i 504 zawierają fałszywy numer ASIN.  Brak tagu Personal. Brak okładki. O dziwo Kindle w tym wypadku nie używa okładki niskiej rozdzielczości. Tutaj do akcji wkracza magia Calibre. Przy tworzeniu pliku AZW3/MOBI Calibre ustawia pole 501 (EBOK) i generuje fałszywy numer ASIN. Zaraz, zaraz, ale według powyższej rozpiski to nie powinno działać. I nie działałoby gdyby nie fakt, że w trakcie wgrywania książki na czytnik Calibre wmusza plik z okładką do pamięci podręcznej urządzenia. Wszystkie okładki lądują w katalogu: /system/thumbnails/ - te dodane przez Calibre są kolorowe.  Katalog ten istnieje jedynie na modelach które mają opcje wyświetlania okładek w bibliotece. Schemat nazwy plików: thumbnail_{asin}_{cdetype}_portrait.jpg Warto dodać, że nic nie stoi nam na przeszkodzie by te pliki podmieniać. Możemy sobie tak ustawić dowolną okładkę dla dowolnej książki :-) I jeszcze parę słów od Roberta:  Dziękuję Pawłowi Jastrzębskiemu za zajęcie się tematem, okazuje się, że nie jest prawdą to, co pisałem w poprzednim artykule,  że nie ma 100% pewności dotyczącej okładek. Paweł poświęcił rozgryzieniu tego problemu sporo czasu – niestety Amazon jest bardzo skąpy w dostarczaniu dokumentacji do formatu MOBI i większość wiedzy dotycząca m.in. okładek pochodzi z rozpracowywania tych plików przez użytkowników. Natomiast to co przeczytaliśmy wyżej, potwierdza wniosek z dnia wczorajszego – jeśli chcemy mieć idealny plik, trzeba go na czytnik wysyłać po kablu. Czytaj dalej:  Jak pozbyć się wiszących spójników w Calibre? Mailem czy po kablu? Porównanie dwóch metod wrzucania książek na Kindle Calibre 1.0. – pierwsza wersja programu po 7 latach! Jest też konkurencja: BookONO Kindle jako czytnik… mangi! – Wydanie III Jak tworzyć recepty za pomocą Calibre – krótki podręcznik [Ankieta] Z jakich krojów czcionki korzystacie na Paperwhite? 