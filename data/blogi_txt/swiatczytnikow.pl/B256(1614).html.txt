Artykuł gościnny KHRoN’a, uzupełnienia: rd.  Ostatnio, aby uprzyjemnić sobie czytanie, chciałem dodać do swoich e-booków numerację stron. Większość książek zakupionych w sklepie Amazon posiada już taką numerację, ale żadna z książek zakupionych poza sklepem Amazon – przykładowo w polskich e-księgarniach – już nie. Po co numeracja stron na czytniku? Najlepiej samodzielnie ocenić, czy gra jest warta świeczki. Jak dla mnie, dzięki takiej naturalnej numeracji stron wiem ile już przeczytałem, wiem ile zostało jeszcze do przeczytania, jestem sobie również w stanie wyobrazić jaki czas to zajmie (nie potrzebując do tego wcale nowego ficzeru z Kindle Paperwhite). Jestem też w stanie porównać na tej podstawie długość różnych książek, ponieważ ilość lokacji ilości lokacji nierówna (jakkolwiek to zabrzmi), gdyż w ilość lokacji wliczone jest również formatowanie tekstu (niewidoczne dla użytkownika) oraz wielkość grafik w tekście. Może to być pomocne choćby przy wyborze kolejnej książki do przeczytania. Oczywiście można poczynić pewne założenia – że jedna strona to około 2-3 ekrany na Kindle (w zależności od tego czy na stronie znajdują się długie, zawijające się przez wiele linii akapity, czy krótkie linie dialogów). Można sprawdzić ile lokacji to jedna strona. Można wreszcie oszacować długość książki dzieląc całkowitą ilość lokacji przez średnią ilość lokacji na trzy kolejne ekrany tekstu… Indeksy stron – pliki APNX … albo dowiedzieć się, że istnieje gotowy mechanizm – pliki APNX – pozwalający na dopasowanie numeracji stron do lokacji w tekście. Mechanizm ten działa tylko i wyłącznie na czytnikach Kindle w plikach MOBI. I wtedy napotkałem problem… jak stworzyć taki plik. Kiedy ostatni raz miałem podobny problem (ze spisem treści), po prostu napisałem kilka plików w notatniku. Jednak napisanie tego pliku w notatniku nie wchodzi naturalnie w grę. Mogłem oczywiście napisać sobie mały program który by to zrobił, ale stwierdziłem że może nie ma sensu wyważać otwartych drzwi i sprawdziłem czy Calibre nie jest czasem w stanie tego zrobić. Oczywiście że jest. Sposób #1: Indeksy tworzone w trakcie kopiowania e-booków przez Calibre Osoby używające Calibre do kopiowania ebooków na Kindle mogły w ogóle nie zwrócić uwagę na kwestię „naturalnej” numeracji stron, ponieważ Calibre automatycznie, w czasie kopiowania, tworzy pliki APNX dla wszystkich plików MOBI. Można jednak nieco usprawnić tak powstałą numerację. W ustawieniach podłączonego czytnika w Calibre (menu Urządzenie-Konfiguracja), znajduje się pole wyboru, dzięki któremu można zdecydować się na „generowanie dokładnej numeracji stron” (opis niżej) albo – to ustawienie jest standardem – „generowanie zgrubnej numeracji stron”. To drugie – jak sama nazwa wskazuje – różni się tym, że tekst nie jest w całości dekodowany, nie następuje łamanie tekstu na strony, więc tak oszacowana ilość stron jest mniej dokładna. Poza tym tryb zgrubny działa dwa razy szybciej. Ale jeśli ktoś nie kopiuje akurat 1000 e-booków i nie zależy mu na czasie, polecam włączyć tryb dokładny. Przy kopiowaniu 10 e-booków naraz czas kopiowania wydłuża się o raptem parę sekund, a tak powstała numeracja jest po prostu lepsza (dokładniejsza i bardziej spójna między książkami). Sposób #2: Indeksy dla ebooków skopiowanych ręcznie bądź z chmury Amazon A co jeśli ktoś nie korzysta z Calibre na codzień? Ja nie używam Calibre do zarządzania zawartością mojego Kindle – kopiuję ebooki ręcznie bądź przez chmurę Amazon, więc nie posiadam tych automatycznie wygenerowanych podczas kopiowania na czytnik indeksów. Aby nie kopiować wszystkich ebooków jeszcze raz, z poziomu ustawień Calibre doinstalowałem wtyczkę APNX Generator.  Po podłączeniu Kindle, z menu Calibre, z listy przy ikonce APNX, wybrałem Generate from file… i pracowicie wskazałem po kolei wszystkie pliki MOBI, jakie miałem na Kindle, a które nie posiadały jeszcze indeksów stron. Do każdego z tych plików wygenerowany został plik APNX.  Przy czym ważne:   Dla Kindle Keyboard/Classic – plik APNX musi znajdować się w tym samym katalogu co plik MOBI. Dla Kindle Touch/Paperwhite – plik APNX musi być w katalogu o nazwie „plik-z-ksiazka.sdr”, którego tworzy sam Kindle, a który zawiera pliki dodatkowe. Przykładowo dla książki z Virtualo „Piata Komenda – Piotr Lipinski.mobi” odpowiedni katalog nazywa się „Piata Komenda – Piotr Lipinski.sdr”.  Zaraz po odłączeniu Kindle od komputera i wybraniu książki, dla której wygenerowany został plik APNX, możemy cieszyć się numeracją stron. Bez ponownego kopiowania wszystkich e-booków na czytnik, bez ponownego indeksowania na samym Kindle, numeracja stron wyświetli się po prostu obok lokacji (np. po wciśnięciu przycisku Menu na Kindle Keyboard, albo wywołaniu menu w Kindle Touch).  Powyżej przykład właśnie z Piątej Komendy. Sposób #3: Wtyczka Count Pages Jest jeszcze wtyczka Count Pages, która opisana została w osobnym artykule. Ma ona tę przewagę nad powyżej opisanymi sposobami, że liczbę stron w książce potrafi ściągnąć z internetu – choć ogranicza się głównie do GoodReads, co sprawia, że przyda się do książek anglojęzycznych. Jak obliczana jest numeracja stron? Jeszcze tylko słowo wyjaśnienia skąd bierze się taka a nie inna numeracja stron. Wtyczka tworząca pliki APNX dekoduje plik MOBI do czystego tekstu i na podstawie założeń, iż jedna strona to maksymalnie 32 linie tekstu po 70 znaków (typowa drukowana strona), zlicza wszystkie strony w ebooku i zapisuje ich indeksy do pliku APNX. Dzięki temu szacunki co do numeracji oraz całkowitej liczby stron są dość realistyczne. Nie biorą one pod uwagę obrazków (których wielkość wlicza się do „lokacji”) ani zawiłości tagów czy formatowania (których to również nie widać w tekście a wliczane są do „lokacji”).  … choć oczywiście tak wygenerowana numeracja nie jest idealna (i na pewno nie będzie się zgadzała z numeracją stron w książce). Lód ma oficjalnie nieco ponad 1000 stron, tu wychodzi prawie 1700 stron… Czytaj dalej:  Mailem czy po kablu? Porównanie dwóch metod wrzucania książek na Kindle Jak pozbyć się wiszących spójników w Calibre? Calibre 1.0. – pierwsza wersja programu po 7 latach! Jest też konkurencja: BookONO Kindle, Calibre, formaty i jak uzyskać idealny plik Jak tworzyć recepty za pomocą Calibre – krótki podręcznik Oprogramowanie „starego” Paperwhite 5.3.9 – poprawa stabilności w PDF 